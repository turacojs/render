{"version":3,"sources":["../../src/renderers/ViewRenderer.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;iCAA4B,qBAAqB;;;;oCACzB,0BAA0B;;;;;;;IAE7B,YAAY;cAAZ,YAAY;;;;;;;AAKlB,aALM,YAAY,CAKjB,OAAO,EAAE,iBAAiB,EAAE;8BALvB,YAAY;;AAMzB,YAAI,OAAO,OAAO,KAAK,UAAU,EAAE;AAC/B,mBAAO,GAAG,sCAAgB,OAAO,CAAC,CAAC;SACtC;;AAED,mCAVa,YAAY,6CAUnB,OAAO,EAAE;AACf,YAAI,CAAC,iBAAiB,GAAG,iBAAiB,CAAC;KAC9C;;iBAZgB,YAAY;;;;;;;2CAcvB,gBAAC,IAAI,EAAE,UAAU,EAAa;;;gBAAX,IAAI,yDAAG,EAAE;;AAC9B,gBAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;AACrB,gBAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;;AAEtB,gBAAI,UAAU,EAAE;AACZ,oBAAI,CAAC,UAAU,CAAC,YAAY,CAAC,sBAAsB,EAAE,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC;aACpF;;AAED,gBAAI,IAAI,CAAC,MAAM,EAAE;AACb,oBAAI,CAAC,UAAU,CAAC,YAAY,CAAC,kBAAkB,EAAE,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;aACtE;;AAED,mBAAO,SAAQ,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,UAAC,OAAO,EAAK;AACxD,sBAAK,kBAAkB,CAAC,IAAI,CAAC,CAAC;;AAE9B,oBAAI,OAAO,EAAE;AACT,wBAAI,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;iBAC3C;;AAED,oBAAI,CAAC,IAAI,CAAC,MAAM,EAAE;AACd,2BAAO,IAAI,CAAC;iBACf;;AAED,oBAAI,UAAU,GAAG,IAAI,CAAC,UAAU,IAAI,EAAE,CAAC;AACvC,0BAAU,CAAC,UAAU,GAAG,UAAU,CAAC;AACnC,0BAAU,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;AAC9B,0BAAU,CAAC,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC;;AAErC,uBAAO,MAAK,gBAAgB,CAAC,IAAI,CAAC,MAAM,EAAE,SAAS,EAAE,UAAU,CAAC,CAAC;aACpE,CAAC,CAAC;SACN;;;WA5CgB,YAAY;;;qBAAZ,YAAY","file":"ViewRenderer.js","sourcesContent":["import ComponentRender from './ComponentRenderer';\nimport ViewFactory from '../factories/ViewFactory';\n\nexport default class ViewRenderer extends ComponentRender {\n    /**\n     * @param {ViewFactory|Function} factory\n     * @param {ComponentRender} componentRenderer\n     */\n    constructor(factory, componentRenderer) {\n        if (typeof factory === 'function') {\n            factory = new ViewFactory(factory);\n        }\n\n        super(factory);\n        this.componentRenderer = componentRenderer;\n    }\n\n    render(view, properties, data = {}) {\n        view.renderer = this;\n        view.init(properties);\n\n        if (properties) {\n            view.$container.setAttribute('data-view-properties', JSON.stringify(properties));\n        }\n\n        if (view.parent) {\n            view.$container.setAttribute('data-view-parent', view.parent.name);\n        }\n\n        return Promise.resolve(view.render(data)).then((content) => {\n            this._setComponentsRole(view);\n\n            if (content) {\n                view.$container.empty().append(content);\n            }\n\n            if (!view.parent) {\n                return view;\n            }\n\n            let dataLayout = data.dataLayout || {};\n            dataLayout.dataLayout = dataLayout;\n            dataLayout.title = view.title;\n            dataLayout.content = view.$container;\n\n            return this.createThenRender(view.parent, undefined, dataLayout);\n        });\n    }\n}\n"]}