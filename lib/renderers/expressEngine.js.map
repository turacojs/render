{"version":3,"sources":["../../src/renderers/expressEngine.js"],"names":[],"mappings":";;;;;;;qBAIwB,mBAAmB;;4BAJlB,gBAAgB;;;;iCACX,qBAAqB;;;;6CACZ,mCAAmC;;;;;;AAE3D,SAAS,mBAAmB,CAAC,OAAO,EAAE;AACjD,QAAI,OAAO,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,KAAK,GAAG,EAAE;AACrC,eAAO,IAAI,GAAG,CAAC;KAClB;;AAED,QAAM,iBAAiB,GAAG,mCACtB,gDAA2B,OAAO,GAAG,aAAa,EAAE,WAAW,CAAC,CACnE,CAAC;;AAEF,QAAM,YAAY,GAAG,8BACjB,gDAA2B,OAAO,EAAE,MAAM,CAAC,EAC3C,iBAAiB,CACpB,CAAC;;AAEF,WAAO,UAAC,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAK;AAC7B,YAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC;AAC5C,YAAI,MAAM,GAAG,YAAY,CAAC,gBAAgB,CAAC,IAAI,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;AACxE,YAAI,OAAO,MAAM,CAAC,IAAI,KAAK,UAAU,EAAE;AACnC,mBAAO,MAAM,CAAC,IAAI,CAAC,UAAC,MAAM;uBAAK,QAAQ,CAAC,IAAI,EAAE,MAAM,CAAC,YAAY,EAAE,CAAC;aAAA,CAAC,SAAM,CAAC,UAAC,GAAG;uBAAK,QAAQ,CAAC,GAAG,CAAC;aAAA,CAAC,CAAC;SACvG;;AAED,gBAAQ,CAAC,IAAI,EAAE,MAAM,CAAC,YAAY,EAAE,CAAC,CAAC;KACzC,CAAC;CACL","file":"expressEngine.js","sourcesContent":["import ViewRenderer from './ViewRenderer';\nimport ComponentRenderer from './ComponentRenderer';\nimport createBasicInstanceFactory from '../factories/basicInstanceFactory';\n\nexport default function createExpressEngine(dirname) {\n    if (dirname[dirname.length - 1] !== '/') {\n        dirname += '/';\n    }\n\n    const componentRenderer = new ComponentRenderer(\n        createBasicInstanceFactory(dirname + 'components/', 'Component')\n    );\n\n    const viewRenderer = new ViewRenderer(\n        createBasicInstanceFactory(dirname, 'View'),\n        componentRenderer\n    );\n\n    return (path, data, callback) => {\n        const name = path.slice(dirname.length, -3);\n        let result = viewRenderer.createThenRender(name, data.properties, data);\n        if (typeof result.then === 'function') {\n            return result.then((result) => callback(null, result.toHtmlString())).catch((err) => callback(err));\n        }\n\n        callback(null, result.toHtmlString());\n    };\n}\n"]}