{"version":3,"sources":["../../src/renderers/ComponentRenderer.js"],"names":[],"mappings":";;;;;;;;;;;;kCAAc,uBAAuB;;;;IAEhB,iBAAiB;;;;;AAIvB,aAJM,iBAAiB,CAItB,OAAO,EAAE;8BAJJ,iBAAiB;;AAK9B,YAAI,CAAC,OAAO,GAAG,OAAO,CAAC;KAC1B;;iBANgB,iBAAiB;;eASlB,0BAAC,aAAa,EAAE,UAAU,EAAE,IAAI,EAAE;AAC9C,gBAAI,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;AACnD,mBAAO,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,UAAU,EAAE,IAAI,CAAC,CAAC;SACnD;;;;;;;eAKY,uBAAC,SAAS,EAAE;AACrB,gBAAI,SAAS,CAAC,QAAQ,IAAI,SAAS,CAAC,QAAQ,CAAC,MAAM,EAAE;AACjD,yBAAS,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAC,WAAW,EAAK;AACxC,wBAAI,CAAC,SAAS,CAAC,GAAG,GAAG,WAAW,CAAC,EAAE;AAC/B,iCAAS,CAAC,GAAG,GAAG,WAAW,CAAC,GAAG,gCAAE,MAAM,CAAC,KAAK,CAAC,CAAC;qBAClD;AACD,6BAAS,CAAC,GAAG,GAAG,WAAW,CAAC,CAAC,YAAY,CAAC,WAAW,EAAE,WAAW,CAAC,CAAC;iBACvE,CAAC,CAAC;aACN;SACJ;;;eAEK,gBAAC,SAAS,EAAE,UAAU,EAAE,IAAI,EAAE;;;AAChC,qBAAS,CAAC,SAAS,GAAG,UAAA,aAAa,EAAI;AACnC,uBAAO,UAAA,UAAU,EAAI;AACjB,wBAAM,IAAI,GAAG,UAAU,CAAC,IAAI,CAAC;AAC7B,2BAAO,UAAU,CAAC,IAAI,CAAC;AACvB,2BAAO,MAAK,gBAAgB,CAAC,aAAa,EAAE,UAAU,EAAE,IAAI,CAAC,CAAA;iBAChE,CAAC;aACL,CAAC;AACF,qBAAS,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;AAC3B,gBAAI,UAAU,EAAE;AACZ,yBAAS,CAAC,UAAU,CAAC,IAAI,CAAC,2BAA2B,EAAE,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC;aACtF;AACD,qBAAS,CAAC,MAAM,EAAE,CAAC;AACnB,gBAAI,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;AAC9B,gBAAI,YAAY,GAAG,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AAC1C,gBAAI,YAAY,YAAY,OAAO,EAAE;AACjC,uBAAO,YAAY,CAAC,IAAI,CAAC;2BAAM,SAAS;iBAAA,CAAC,CAAC;aAC7C;AACD,mBAAO,SAAS,CAAC;SACpB;;;WA/CgB,iBAAiB;;;qBAAjB,iBAAiB","file":"ComponentRenderer.js","sourcesContent":["import $ from 'springbokjs-dom/lib/$';\n\nexport default class ComponentRenderer {\n    /**\n     * @param ComponentFactory factory\n     */\n    constructor(factory) {\n        this.factory = factory;\n    }\n\n\n    createThenRender(componentName, properties, data) {\n        var component = this.factory.create(componentName);\n        return this.render(component, properties, data);\n    }\n\n    /**\n     * Invoked on both server and browser (except the first time for the browser)\n     */\n    _initElements(component) {\n        if (component.elements && component.elements.length) {\n            component.elements.forEach((elementName) => {\n                if (!component['$' + elementName]) {\n                    component['$' + elementName] = $.create('div');\n                }\n                component['$' + elementName].setAttribute('data-role', elementName);\n            });\n        }\n    }\n\n    render(component, properties, data) {\n        component.component = componentName => {\n            return properties => {\n                const data = properties.data;\n                delete properties.data;\n                return this.createThenRender(componentName, properties, data)\n            };\n        };\n        component.init(properties);\n        if (properties) {\n            component.$container.attr('data-component-properties', JSON.stringify(properties));\n        }\n        component.create();\n        this._initElements(component);\n        var renderResult = component.render(data);\n        if (renderResult instanceof Promise) {\n            return renderResult.then(() => component);\n        }\n        return component;\n    }\n}\n"]}